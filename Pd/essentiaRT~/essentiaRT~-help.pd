#N canvas 489 116 976 666 10;
#X declare -path ../utils;
#X text 449 -98 [essentiaRT~];
#X text 449 -58 inlet: audio signal;
#X text 449 5 outlet3: list of higher-level features. These values
are estimated over a bigger window once an onset is detected:;
#X obj 453 69 route list;
#X obj 627 127 spigot 0;
#X obj 672 109 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 453 186 5 0 0 0 - - -;
#X obj 453 206 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 453 262 route list;
#X floatatom 453 518 7 0 0 1 noisiness.mean - -;
#X floatatom 493 497 7 0 0 1 noisiness.variance - -;
#X msg -5 15 stop;
#X msg -12 -7 bang;
#X obj -13 -55 soundfiler;
#X obj -13 -103 loadbang;
#X obj -12 38 tabplay~ sample;
#X msg -13 -79 read -resize ./onsets.wav sample;
#X obj -4 70 output~;
#X text 21 -8 play sample;
#X obj -13 -33 table sample 44100;
#X obj 72 244 timer;
#X floatatom 72 265 5 0 0 0 - - -;
#X obj 72 224 bang;
#X obj 103 224 bang;
#X text 110 258 delay between onset detection and high level features
calculation.;
#X text 449 -78 arg: threshold level for the Super Flux algorithm.
;
#X obj -12 193 essentiaRT~ 5;
#X text 449 -38 outlet1: onset strenght value at audio rate (constant).
;
#X obj 44 -103 declare -path ../utils;
#X msg 9 169 delayMode 0;
#X text 82 170 inter-onset calculation;
#X msg 2 145 delayMode \$1;
#X text 86 146 window-size in ms.;
#X floatatom 2 124 5 0 0 0 - - -;
#X obj 63 374 s high-level;
#X obj 25 488 s low-level;
#X obj 453 49 r low-level;
#X obj 627 147 print inst.mfcc;
#X obj 453 89 route onset_strength inst.centroid inst.mfcc;
#X floatatom 540 167 5 0 0 0 - - -;
#X text 576 167 instantaneous spectral centroid;
#X text 488 186 onset strength;
#X obj 453 239 r high-level;
#X obj 714 110 print +lowLevel;
#X obj 780 334 print +highLevel;
#X floatatom 534 473 7 0 0 1 pitch.mean(Hz) - -;
#X floatatom 575 452 7 0 0 1 pitch.variance - -;
#X floatatom 616 428 7 0 0 1 pitchConfidence.mean - -;
#X floatatom 657 406 7 0 0 1 pitchConfidence.variance - -;
#X floatatom 698 383 7 0 0 1 loudness.mean - -;
#X floatatom 739 360 7 0 0 1 loudness.variance - -;
#X text 450 -18 outlet2: list of low-level features at control rate.
;
#X text 31 403 The second outlet reports instantaneous information
on the onset detection (calculated on a fixed window of 2048 points).
The low-level features provided are the onset strength \, the instantaneous
spectral centroid (0-1) \, and the instantaneous mfcc (mel frecuency
cepstrum coefficients).;
#X text 69 290 once an onset is detected (on the second outlet) \,
a larger window is used to estimate some higher level features on the
event \, listed on outlet3. The window size over which these parameters
are calculated can be set dynamically with the message "delayMode."
A delayMode time of 0 takes the full chunk between onset reports.;
#X obj 453 284 route noisiness.mean noisiness.var pitch.mean pitch.var
pitchConfidence.mean pitchConfidence.var loudness.mean loudness.var
;
#X connect 3 0 38 0;
#X connect 4 0 37 0;
#X connect 5 0 4 1;
#X connect 6 0 7 0;
#X connect 8 0 54 0;
#X connect 11 0 15 0;
#X connect 12 0 15 0;
#X connect 14 0 16 0;
#X connect 15 0 17 0;
#X connect 15 0 17 1;
#X connect 15 0 26 0;
#X connect 15 1 12 0;
#X connect 16 0 13 0;
#X connect 20 0 21 0;
#X connect 22 0 20 0;
#X connect 23 0 20 1;
#X connect 26 1 22 0;
#X connect 26 1 35 0;
#X connect 26 2 23 0;
#X connect 26 2 34 0;
#X connect 29 0 26 0;
#X connect 31 0 26 0;
#X connect 33 0 31 0;
#X connect 36 0 3 0;
#X connect 38 0 6 0;
#X connect 38 1 39 0;
#X connect 38 2 4 0;
#X connect 38 3 43 0;
#X connect 42 0 8 0;
#X connect 54 0 9 0;
#X connect 54 1 10 0;
#X connect 54 2 45 0;
#X connect 54 3 46 0;
#X connect 54 4 47 0;
#X connect 54 5 48 0;
#X connect 54 6 49 0;
#X connect 54 7 50 0;
#X connect 54 8 44 0;
