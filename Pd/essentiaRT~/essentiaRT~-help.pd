#N canvas 392 33 940 851 10;
#X declare -path ../utils;
#X obj 123 26 route list;
#X floatatom 190 91 5 0 0 0 - - -;
#X obj 190 111 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 123 222 route list;
#X msg -340 217 stop;
#X msg -301 218 bang;
#X obj 229 -33 soundfiler;
#X obj 229 -81 loadbang;
#X obj -340 241 tabplay~ sample;
#X obj -332 268 output~;
#X obj -256 487 timer;
#X floatatom -256 508 5 0 0 0 - - -;
#X obj -256 467 bang;
#X obj -225 467 bang;
#X obj -340 436 essentiaRT~ 5;
#X obj 286 -81 declare -path ../utils;
#X msg -319 412 delayMode 0;
#X text -246 412 inter-onset calculation;
#X msg -326 388 delayMode \$1;
#X text -242 389 window-size in ms.;
#X floatatom -326 367 5 0 0 0 - - -;
#X floatatom 257 70 7 0 0 0 - - -;
#X floatatom 170 543 7 0 0 1 noisiness.mean - -;
#X floatatom 194 522 7 0 0 1 noisiness.variance - -;
#X floatatom 218 498 7 0 0 1 f0.mean - -;
#X floatatom 243 476 7 0 0 1 f0.variance - -;
#X floatatom 267 453 7 0 0 1 f0Confidence.mean - -;
#X floatatom 291 430 7 0 0 1 f0Confidence.variance - -;
#X text 225 91 instantaneous onset strength;
#X obj -303 686 s instantaneous;
#X obj -265 597 s averaged;
#X obj 123 6 r instantaneous;
#X text 303 70 instantaneous spectral centroid (Hz.);
#X obj 123 199 r averaged;
#X obj 123 135 prepend set;
#X msg 123 157 -582.469 66.6043 39.2483 48.6574 1.26899 10.3458 -5.81166
-0.387955 -10.3574 -8.09757 2.91494 -2.0541 -13.1684;
#X text 198 134 mfcc's;
#X floatatom 315 403 7 0 0 1 loudness.mean - -;
#X floatatom 340 379 7 0 0 1 loudness.variance - -;
#X floatatom 364 357 7 0 0 1 centroid.mean - -;
#X floatatom 388 334 7 0 0 1 centroid.variance - -;
#X floatatom 412 311 7 0 0 1 loudness.variance - -;
#X msg 122 651 -893.573 8.67852 23.44 41.0727 8.5562 12.3554 -4.71429
-4.48668 -7.95521 -9.60669 -8.17496 -6.87165 -10.0772;
#X obj 146 568 prepend set;
#X msg 146 590 41195.3 84.8184 182.548 657.113 22.1773 44.2837 64.5558
53.0202 84.1029 92.1425 71.8989 57.4413 102.175;
#X obj 122 629 prepend set;
#X text 196 628 mfcc's mean values;
#X text 223 568 mfcc's variance values;
#X obj 122 245 route mfcc.mean mfcc.var noisiness.mean noisiness.var
f0.mean f0.var f0Confidence.mean f0Confidence.var loudness.mean loudness.var
centroid.mean centroid.var tempCentroid;
#X obj 123 46 route i.mfcc i.strength i.centroid;
#X msg 229 -57 read -resize ./testSound.wav sample;
#N canvas 0 22 450 278 (subpatch) 0;
#X array sample 154350 float 2;
#X coords 0 1 154350 -1 100 70 1 0 0;
#X restore 121 -83 graph;
#X text -355 14 - creation argument: threshold level to report features.
;
#X text -355 34 - inlet: audio signal;
#X text -355 54 - outlet 1: onset detector novelty function at audio
rate (used internally for onset detection \, using a given threshold).
;
#X text -354 100 - outlet 2: list of instantaneous features.;
#X text -355 120 - outlet 3: list of averaged features. These values
are estimated over a frame-size specified by the user with the method
"delayMode".;
#X text -355 -94 EssentiaRT~ is a real-time subset of Essentia (MTG's
open-source C++ library for audio analysis and audio-based music information
retrieval) implemented as an external for Pd and Max/MSP. As such \,
it does not yet include all of Essentiaâ€™s algorithms \, but a number
of features to slice and provide on-the-fly descriptors for classification
of audio in real-time.;
#X text -218 501 delay between onset detection and averaged feature
calculation.;
#X text -259 533 once an onset is detected \, a larger window is used
to calculate some features on the event \, listed on outlet3. The window
size over which these parameters are calculated can be set dynamically
with the message "delayMode.";
#X text -297 621 The 2nd outlet reports instantaneous information over
the detected onsets (on a fixed window of 2048 points). The features
provided are the onset strength \, the instantaneous spectral centroid
and the instantaneous MFCC's.;
#X text -287 342 "delayMode" sets the time over which the averaged
descriptors are calcutated. A time of 0 takes the full chunk between
onset reports.;
#X connect 0 0 49 0;
#X connect 1 0 2 0;
#X connect 3 0 48 0;
#X connect 4 0 8 0;
#X connect 5 0 8 0;
#X connect 7 0 50 0;
#X connect 8 0 9 0;
#X connect 8 0 9 1;
#X connect 8 0 14 0;
#X connect 8 1 5 0;
#X connect 10 0 11 0;
#X connect 12 0 10 0;
#X connect 13 0 10 1;
#X connect 14 1 12 0;
#X connect 14 1 29 0;
#X connect 14 2 13 0;
#X connect 14 2 30 0;
#X connect 16 0 14 0;
#X connect 18 0 14 0;
#X connect 20 0 18 0;
#X connect 31 0 0 0;
#X connect 33 0 3 0;
#X connect 34 0 35 0;
#X connect 43 0 44 0;
#X connect 45 0 42 0;
#X connect 48 0 45 0;
#X connect 48 1 43 0;
#X connect 48 2 22 0;
#X connect 48 3 23 0;
#X connect 48 4 24 0;
#X connect 48 5 25 0;
#X connect 48 6 26 0;
#X connect 48 7 27 0;
#X connect 48 8 37 0;
#X connect 48 9 38 0;
#X connect 48 10 39 0;
#X connect 48 11 40 0;
#X connect 48 12 41 0;
#X connect 49 0 34 0;
#X connect 49 1 1 0;
#X connect 49 2 21 0;
#X connect 50 0 6 0;
