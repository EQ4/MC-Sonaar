#N canvas 457 22 607 795 10;
#X text -6 -186 [essentiaRT~];
#X text -6 -146 inlet: audio signal;
#X text -6 -103 outlet2: list of features at control rate:;
#X text 4 -83 - onset_strength: same as in outlet1 but at control rate.
;
#X text 4 -63 - inst.tri: 139 dimensional vector containing... ???????
;
#X text -6 -13 outlet3: list of higher-level features. These values
are estimated over a bigger window once an onset is detected:;
#X text 4 50 - nsdf.var: and its variance.;
#X text 4 20 - nsdf.mean: mean of the normalized squared difference
function over the analysis window.;
#X text 4 103 - pitched.var: variance of the above-mentioned parameter.
;
#X obj -1 120 cnv 15 600 480 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 50 432 route list;
#X obj 177 549 print inst.tri;
#X obj 177 526 spigot 0;
#X obj 222 505 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 13 574 print~;
#X obj 66 534 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 21 552 spigot 0;
#X floatatom 50 480 5 0 0 0 - - -;
#X obj 50 500 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 59 574 print vector signal;
#X obj 88 305 route list;
#X floatatom 247 431 5 0 0 1 nsdf.mean - -;
#X obj 305 480 print more??;
#X floatatom 257 411 12 0 0 1 nsdf.variance - -;
#X floatatom 267 391 5 0 0 1 pitched.mean - -;
#X floatatom 276 370 5 0 0 1 pitched.variance - -;
#X obj 88 327 route nsdf.mean nsdf.var pitched.mean pitched.var;
#X obj 380 -189 cnv 15 220 300 empty empty empty 20 12 0 14 -233017
-66577 0;
#X msg 424 -60 stop;
#X msg 417 -82 bang;
#X obj 389 -135 soundfiler;
#X obj 389 -183 loadbang;
#X obj 417 -31 tabplay~ sample;
#X obj 462 17 s~ input;
#X obj 504 -11 spigot;
#X obj 537 -32 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 554 -33 loop;
#X msg 389 -159 read -resize ./onsets.wav sample;
#X obj 389 51 output~;
#X text 450 -83 play sample;
#X obj 389 -113 table sample 44100;
#X obj 96 195 timer;
#X floatatom 96 216 5 0 0 0 - - -;
#X text 98 257 once an onset is detected (on the second outlet) \,
a larger window (currently fixed at 100 ms.) is used to estimate some
higher level features on the event \, listed on outlet3.;
#X obj 96 175 bang;
#X obj 128 171 bang;
#X text 131 216 delay between onset detection and high level features
calculation.;
#X text 4 70 - pitched.mean: this gives the mean of the 'pitchniness'
of the sound by measuring the peakiness in the spectrum.;
#X text -6 -166 arg: threshold level for the Super Flux algorithm.
;
#X obj 241 503 spigot 0;
#X obj 286 482 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 241 526 print inst.centroid;
#X obj 379 348 print more??;
#X obj 13 154 essentiaRT~ 5;
#X obj 13 133 r~ input;
#X text -6 -126 outlet1: onset strenght value at audio rate (constant).
;
#X text 4 -43 - inst.centroid: spectral centroid of the input signal
(0-1) where 1 is SR/2;
#X obj 50 454 route onset_strength inst.tri inst.centroid;
#N canvas 1169 24 595 551 advanced 1;
#X obj 40 -120 vline~;
#X obj 44 -72 *~;
#X floatatom 68 -206 5 0 0 0 - - -;
#X obj 68 -184 osc~ 1111;
#X obj 55 -25 osc~ 400;
#X floatatom 87 -59 5 0 0 0 - - -;
#X msg 34 -152 0 \, 1 100 \, 0 200 300;
#X obj 154 53;
#X connect 0 0 1 1;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X restore 390 171 pd advanced;
#X connect 10 0 57 0;
#X connect 12 0 11 0;
#X connect 13 0 12 1;
#X connect 15 0 16 1;
#X connect 16 0 14 0;
#X connect 17 0 18 0;
#X connect 18 0 16 0;
#X connect 20 0 26 0;
#X connect 26 0 21 0;
#X connect 26 1 23 0;
#X connect 26 2 24 0;
#X connect 26 3 25 0;
#X connect 26 4 52 0;
#X connect 28 0 32 0;
#X connect 29 0 32 0;
#X connect 31 0 37 0;
#X connect 32 0 33 0;
#X connect 32 0 38 0;
#X connect 32 0 38 1;
#X connect 32 1 34 0;
#X connect 34 0 32 0;
#X connect 35 0 34 1;
#X connect 37 0 30 0;
#X connect 41 0 42 0;
#X connect 44 0 41 0;
#X connect 45 0 41 1;
#X connect 49 0 51 0;
#X connect 50 0 49 1;
#X connect 53 0 14 0;
#X connect 53 1 10 0;
#X connect 53 1 44 0;
#X connect 53 2 20 0;
#X connect 53 2 45 0;
#X connect 54 0 53 0;
#X connect 57 0 17 0;
#X connect 57 1 12 0;
#X connect 57 2 49 0;
#X connect 57 3 22 0;
