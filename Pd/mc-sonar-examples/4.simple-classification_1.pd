#N canvas 224 22 1027 713 10;
#X declare -path ../essentiaRT~ -path ../utils;
#X obj -58 320 output~;
#X obj -243 412 route list;
#X obj -280 390 essentiaRT~ 5;
#X text 164 50 ...assuming externals are in parent folder...;
#X obj 164 77 loadbang;
#X msg -280 203 station \$1;
#X floatatom -280 182 5 0 7 0 - - -;
#X obj -241 285 print STATION;
#X obj -280 226 radioin;
#X obj -63 169 hsl 100 15 0 1 0 1 empty init_volume empty -2 -8 0 10
-262144 -1 -1 4950 1;
#X obj -26 275 line~;
#X obj -66 275 line~;
#X obj 0 299 *~;
#X obj -81 296 *~;
#X obj -66 195 - 1;
#X obj -66 215 abs;
#X obj -66 235 sqrt;
#X msg -66 255 \$1 20;
#X obj -26 195 sqrt;
#X text -285 15 =====================;
#X obj -263 522 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg -26 255 \$1 20;
#X obj -244 676 s onset_times;
#X obj 234 254 r onset_times;
#X obj 194 302 timer;
#X obj 262 531 +;
#X obj 291 621 throw~ slices;
#X obj 262 576 delread~ \$0-deline;
#X obj 291 599 *~;
#X obj 259 403 list split;
#X obj 287 510 sum;
#X obj 240 303 list;
#X obj 234 275 t b l;
#X obj 164 234 delay;
#X obj 164 257 t b b;
#X obj 296 488 s newEvent;
#X msg 183 210 stop;
#X msg 173 189 bang;
#X obj 164 164 r newEvent;
#X obj 296 427 list split 1;
#X floatatom 302 449 7 0 0 0 - - -;
#X text 351 449 length of current chunk;
#X text 301 468 (elapsed time from previous onset detection);
#X obj 165 34 declare -path ../essentiaRT~ -path ../utils;
#X msg -235 529 reset;
#X obj 276 324 minmax;
#X obj 289 352 listfind;
#X obj 285 299 t l l;
#X floatatom 335 393 5 0 0 0 - - -;
#X obj -244 575 t l l;
#X text 372 393 current slice;
#X obj 289 376 f;
#X obj 262 553 trapenv 2;
#X obj -156 603 list_value;
#X text -283 7 4.simple-classification;
#X obj -243 433 route inst.mfcc;
#X obj -99 515 euclidist;
#X floatatom -91 539 5 0 0 0 - - -;
#N canvas 1328 313 474 216 store-mfcc 0;
#X obj 39 15 inlet;
#X obj 56 161 outlet;
#X obj 56 91 prepend set;
#X obj 56 68 list;
#X obj 39 39 route bang;
#X msg 56 116 99.7728 114.175 -10.0614 45.3424 51.5698 35.2211 17.5277
19.6003 20.2457 12.4805 0.250664 -8.55818 -4.43165;
#X connect 0 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 1 0;
#X restore -48 494 pd store-mfcc;
#X obj -48 460 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -243 468 t l l;
#X obj -272 305 delwrite~ \$0-deline 20000;
#X obj -243 552 list_iot 20000;
#X obj 15 278 catch~ slices;
#X text -64 149 out (crossfade);
#X text -146 624 [list_value] receives single values on the right inlet
and a list with onset times on its left inlet. The result is a new
list with the same indexes as the inter-onset times.;
#X obj -156 676 s euclidean_dist;
#X text -284 159 (1) pick a radio station (0-7);
#X text -283 126 ============================ I/O ===========================
;
#X text -268 367 ====================== essentiaRT~ =========================
;
#X text -141 431 <- we take the mfcc's on the onsets;
#X text -54 538 euclidean distance;
#X obj -243 505 filtevent 50;
#X text -28 457 (2) press to take an mfcc sample;
#X text -27 473 to compare to.;
#X text 207 187 (3) PRESS BANG TO START SLICING THE INPUT!;
#X text 160 146 ===================== CLASSIFICATION =======================
;
#X obj 285 277 r euclidean_dist;
#X text 348 296 Here we find the lowest value on the list of euclidean
distances (which represent similar sounds) and play that slice back
until a better match comes in. The result tends to produce loops that
change over time as the audio comes in and out the buffer.;
#X msg 164 100 bang \; pd dsp 1 \; init_volume 0.5;
#X text -283 29 This example attempts simple classification of the
detected onsets. It takes the mfcc's of the detected onsets and calculates
their euclidean distance to a user selected sample. Then stores the
values in a list synched with the onset times \, so we can adjust the
playback with the classifier values. In this example \, the smaller
distance to the sample is played-back.;
#X connect 1 0 55 0;
#X connect 2 1 1 0;
#X connect 4 0 79 0;
#X connect 5 0 8 0;
#X connect 6 0 5 0;
#X connect 8 0 2 0;
#X connect 8 0 61 0;
#X connect 8 0 13 0;
#X connect 8 2 7 0;
#X connect 9 0 14 0;
#X connect 9 0 18 0;
#X connect 10 0 12 0;
#X connect 11 0 13 1;
#X connect 12 0 0 1;
#X connect 13 0 0 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 11 0;
#X connect 18 0 21 0;
#X connect 21 0 10 0;
#X connect 23 0 32 0;
#X connect 24 0 25 0;
#X connect 25 0 52 0;
#X connect 27 0 28 0;
#X connect 28 0 26 0;
#X connect 29 1 30 0;
#X connect 29 1 39 0;
#X connect 30 0 25 1;
#X connect 31 0 29 0;
#X connect 32 0 24 0;
#X connect 32 1 31 1;
#X connect 33 0 34 0;
#X connect 34 0 24 1;
#X connect 34 1 31 0;
#X connect 36 0 33 0;
#X connect 37 0 33 0;
#X connect 38 0 33 0;
#X connect 39 0 35 0;
#X connect 39 0 40 0;
#X connect 44 0 62 0;
#X connect 45 0 46 0;
#X connect 46 0 51 0;
#X connect 47 0 45 0;
#X connect 47 1 46 1;
#X connect 49 0 22 0;
#X connect 49 1 53 0;
#X connect 51 0 29 1;
#X connect 51 0 48 0;
#X connect 52 0 27 0;
#X connect 52 1 28 1;
#X connect 53 0 66 0;
#X connect 55 0 58 0;
#X connect 55 0 60 0;
#X connect 56 0 57 0;
#X connect 56 0 53 1;
#X connect 58 0 56 1;
#X connect 59 0 58 0;
#X connect 60 0 72 0;
#X connect 60 1 56 0;
#X connect 62 0 49 0;
#X connect 63 0 12 1;
#X connect 72 0 20 0;
#X connect 72 0 62 0;
#X connect 77 0 47 0;
