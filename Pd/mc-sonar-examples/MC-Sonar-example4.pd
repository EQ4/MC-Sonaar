#N canvas 329 22 1257 596 10;
#X declare -path ../essentiaRT~ -path ../utils;
#X obj 32 351 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj -182 536 output~;
#X obj 111 247 route list;
#X obj 111 268 route onset_strength;
#X obj 51 327 sel 1;
#X floatatom 66 268 5 0 0 0 - init_threshold -;
#X obj 51 305 > 1;
#X obj -81 354 catch~ slices;
#X obj 74 203 essentiaRT~ 5;
#X text -247 16 ...assuming externals are in parent folder...;
#X text -250 140 AUDIO INPUT;
#X text 70 153 ONSET DETECTION;
#X floatatom 145 293 5 0 0 0 - - -;
#X text 178 293 onset strength;
#X obj 130 0 loadbang;
#X obj 111 225 spigot 1;
#X obj 166 205 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 187 203 output onsets;
#X floatatom 126 329 5 0 0 0 - init_filterevents -;
#X text -250 314 =====================;
#X text -250 306 AUDIO OUTPUT;
#X msg -246 191 station \$1;
#X floatatom -246 170 5 0 7 0 - - -;
#X obj -207 237 print STATION;
#X obj -246 215 radioin;
#X obj -187 354 hsl 100 15 0 1 0 1 empty init_volume empty -2 -8 0
10 -262144 -1 -1 9900 1;
#X obj -150 467 line~;
#X obj -190 467 line~;
#X obj -96 499 *~;
#X obj -246 499 *~;
#X obj -190 380 - 1;
#X obj -190 401 abs;
#X obj -190 423 sqrt;
#X msg -190 445 \$1 20;
#X obj -150 380 sqrt;
#X text -190 337 crossfade;
#X obj -246 354 r~ input;
#X text -250 48 =====================;
#X obj 59 492 print ONSET-TIMES;
#X obj 32 371 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg -150 445 \$1 20;
#X obj 51 514 s onset_times;
#X text 495 24 ONSET RETRIEVAL;
#X obj 569 135 r onset_times;
#X obj 529 183 timer;
#X obj 558 444 +;
#X obj 587 534 throw~ slices;
#X obj 558 489 delread~ \$0-deline;
#X obj 587 512 *~;
#X obj 555 316 list split;
#X obj 583 423 sum;
#X obj 575 184 list;
#X obj 569 156 t b l;
#X obj 51 349 filtevent 500;
#X obj 59 471 spigot 0;
#X obj 104 454 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text -208 169 pick a radio station (0-7);
#X obj 499 115 delay;
#X obj 499 138 t b b;
#X obj 592 401 s newEvent;
#X msg 518 91 stop;
#X msg 508 70 bang;
#X obj 499 50 r newEvent;
#X obj 592 339 list split 1;
#X obj 558 466 quickenv 2;
#X floatatom 598 361 7 0 0 0 - - -;
#X text 649 361 length of current chunk;
#X text 597 381 (elapsed time from previous onset detection);
#X obj -246 0 declare -path ../essentiaRT~ -path ../utils;
#X text 495 32 =====================;
#X text -248 40 essentiaRT~ example-4;
#X text 70 161 ================================;
#X obj -246 281 s~ input;
#X obj 74 182 r~ input;
#X obj 176 427 list_parameter;
#X obj 51 396 list_onsetTimes 10000;
#X msg 57 374 reset;
#X floatatom 174 374 5 0 0 0 - init_buffer_size -;
#X obj 176 557 s onset_strengths;
#X obj 182 511 spigot 0;
#X obj 227 494 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 182 532 print ONSET-STRENGTH;
#X text 186 448 list_parameter receives single values on the right
inlet and a list with onset times on its left inlet. The result is
a new list with the;
#X text -250 151 ================================;
#X text -248 62 This example attempts some simple classification on
the detected onsets. It stores the onset strenghts in a list synched
with the onset times \, so we can tweak the playback with the classifier
values. In this example \, only the strongest onset of the list is
played-back.;
#X obj 572 257 minmax;
#X obj 581 210 r onset_strengths;
#X obj 579 279 listfind;
#X obj 581 232 t l l;
#X floatatom 625 315 5 0 0 0 - - -;
#X obj 51 419 t l l;
#X msg 130 23 bang \; pd dsp 1 \; init_threshold set 1 \; init_filterevents
set 500 \; init_volume 0.5 \; init_buffer_size set 10000;
#X text 640 234 Instead of reading from random onset times. Here we
find the highest value on the list of onset streghts and play that
slice back. The result tends to produce loops that change over time
as the audio comes in and out the buffer.;
#X text 662 314 current slice;
#X text 546 70 PRESS BANG TO START SLICING THE INPUT!;
#X obj -236 259 delwrite~ \$0-deline 1000;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 0 12 0;
#X connect 3 0 74 1;
#X connect 4 0 0 0;
#X connect 4 0 53 0;
#X connect 5 0 6 1;
#X connect 6 0 4 0;
#X connect 7 0 28 1;
#X connect 8 1 15 0;
#X connect 14 0 91 0;
#X connect 15 0 2 0;
#X connect 16 0 15 1;
#X connect 18 0 53 1;
#X connect 21 0 24 0;
#X connect 22 0 21 0;
#X connect 24 0 72 0;
#X connect 24 0 95 0;
#X connect 24 2 23 0;
#X connect 25 0 30 0;
#X connect 25 0 34 0;
#X connect 26 0 28 0;
#X connect 27 0 29 1;
#X connect 28 0 1 1;
#X connect 29 0 1 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 33 0 27 0;
#X connect 34 0 40 0;
#X connect 36 0 29 0;
#X connect 40 0 26 0;
#X connect 43 0 52 0;
#X connect 44 0 45 0;
#X connect 45 0 64 0;
#X connect 47 0 48 0;
#X connect 48 0 46 0;
#X connect 49 1 50 0;
#X connect 49 1 63 0;
#X connect 50 0 45 1;
#X connect 51 0 49 0;
#X connect 52 0 44 0;
#X connect 52 1 51 1;
#X connect 53 0 39 0;
#X connect 53 0 75 0;
#X connect 54 0 38 0;
#X connect 55 0 54 1;
#X connect 57 0 58 0;
#X connect 58 0 44 1;
#X connect 58 1 51 0;
#X connect 60 0 57 0;
#X connect 61 0 57 0;
#X connect 62 0 57 0;
#X connect 63 0 59 0;
#X connect 63 0 65 0;
#X connect 64 0 47 0;
#X connect 64 1 48 1;
#X connect 73 0 8 0;
#X connect 74 0 78 0;
#X connect 74 0 79 0;
#X connect 75 0 90 0;
#X connect 76 0 75 0;
#X connect 77 0 75 1;
#X connect 79 0 81 0;
#X connect 80 0 79 1;
#X connect 85 0 87 0;
#X connect 86 0 88 0;
#X connect 87 0 89 0;
#X connect 87 0 49 1;
#X connect 88 0 85 0;
#X connect 88 1 87 1;
#X connect 90 0 54 0;
#X connect 90 0 41 0;
#X connect 90 1 74 0;
