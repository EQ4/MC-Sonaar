#N canvas 310 40 934 817 10;
#X declare -path ../utils;
#X obj 129 37 route list;
#X floatatom 196 102 5 0 0 0 - - -;
#X obj 196 122 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 129 233 route list;
#X msg -327 238 stop;
#X msg -288 239 bang;
#X obj 235 -22 soundfiler;
#X obj 235 -70 loadbang;
#X obj -327 262 tabplay~ sample;
#X obj -319 289 output~;
#X obj -243 478 timer;
#X floatatom -243 499 5 0 0 0 - - -;
#X obj -243 458 bang;
#X obj -212 458 bang;
#X obj -327 427 essentiaRT~ 5;
#X obj 292 -70 declare -path ../utils;
#X msg -306 403 delayMode 0;
#X text -233 403 inter-onset calculation;
#X msg -313 379 delayMode \$1;
#X text -229 380 window-size in ms.;
#X floatatom -313 358 5 0 0 0 - - -;
#X floatatom 263 81 7 0 0 0 - - -;
#X floatatom 176 554 7 0 0 1 noisiness.mean - -;
#X floatatom 200 533 7 0 0 1 noisiness.variance - -;
#X floatatom 224 509 7 0 0 1 f0.mean - -;
#X floatatom 249 487 7 0 0 1 f0.variance - -;
#X floatatom 273 464 7 0 0 1 f0Confidence.mean - -;
#X floatatom 297 441 7 0 0 1 f0Confidence.variance - -;
#X text 231 102 instantaneous onset strength;
#X obj -290 677 s instantaneous;
#X obj -252 588 s averaged;
#X obj 129 17 r instantaneous;
#X text 309 81 instantaneous spectral centroid (Hz.);
#X obj 129 210 r averaged;
#X obj 129 146 prepend set;
#X msg 129 168 -577.448 52.1542 27.4233 40.3283 -1.14934 6.63623 -8.1706
-10.6832 -25.5045 -14.6483 -2.76898 -3.78842 -2.21012;
#X text 204 145 mfcc's;
#X floatatom 321 414 7 0 0 1 loudness.mean - -;
#X floatatom 346 390 7 0 0 1 loudness.variance - -;
#X floatatom 370 368 7 0 0 1 centroid.mean - -;
#X floatatom 394 345 7 0 0 1 centroid.variance - -;
#X floatatom 418 322 7 0 0 1 Temporal_Centroid - -;
#X msg 128 662 -881.375 10.3469 23.6043 40.8862 8.0462 11.8588 -5.29131
-5.05792 -9.09229 -9.86698 -7.93261 -6.89168 -9.57839;
#X obj 152 579 prepend set;
#X msg 152 601 42459.7 136.807 189.586 643.414 27.3876 45.957 61.5925
57.8028 100.121 89.8813 69.0339 56.5613 105.515;
#X obj 128 640 prepend set;
#X text 202 639 mfcc's mean values;
#X text 229 579 mfcc's variance values;
#X obj 128 256 route mfcc.mean mfcc.var noisiness.mean noisiness.var
f0.mean f0.var f0Confidence.mean f0Confidence.var loudness.mean loudness.var
centroid.mean centroid.var tempCentroid;
#X obj 129 57 route i.mfcc i.strength i.centroid;
#X msg 235 -46 read -resize ./testSound.wav sample;
#N canvas 0 22 450 278 (subpatch) 0;
#X array sample 154350 float 2;
#X coords 0 1 154350 -1 100 70 1;
#X restore 127 -72 graph;
#X text -332 85 - inlet: audio signal;
#X text -332 105 - outlet 1: onset detector novelty function at audio
rate (used internally for onset detection \, using a given threshold).
;
#X text -331 151 - outlet 2: list of instantaneous features.;
#X text -332 171 - outlet 3: list of averaged features. These values
are estimated over a frame-size specified by the user with the method
"delayMode".;
#X text -332 -83 EssentiaRT~ is a real-time subset of Essentia (MTG's
open-source C++ library for audio analysis and audio-based music information
retrieval) implemented as an external for Pd and Max/MSP. As such \,
it does not yet include all of Essentiaâ€™s algorithms \, but a number
of features to slice and provide on-the-fly descriptors for classification
of audio in real-time.;
#X text -205 492 delay between onset detection and averaged feature
calculation.;
#X text -246 524 once an onset is detected \, a larger window is used
to calculate some features on the event \, listed on outlet3. The window
size over which these parameters are calculated can be set dynamically
with the message "delayMode.";
#X text -284 612 The 2nd outlet reports instantaneous information over
the detected onsets (on a fixed window of 2048 points). The features
provided are the onset strength \, the instantaneous spectral centroid
and the instantaneous MFCC's.;
#X text -274 333 "delayMode" sets the time over which the averaged
descriptors are calcutated. A time of 0 considers the full chunk between
onset reports.;
#X text -332 15 - creation argument: threshold level to report features.
It will typically be in the range 10 and 50 \, depending on the source.
With a higher threshold \, the object will only report very clear attacks
\, such as those produced by percussive instruments.;
#X connect 0 0 49 0;
#X connect 1 0 2 0;
#X connect 3 0 48 0;
#X connect 4 0 8 0;
#X connect 5 0 8 0;
#X connect 7 0 50 0;
#X connect 8 0 9 0;
#X connect 8 0 9 1;
#X connect 8 0 14 0;
#X connect 8 1 5 0;
#X connect 10 0 11 0;
#X connect 12 0 10 0;
#X connect 13 0 10 1;
#X connect 14 1 12 0;
#X connect 14 1 29 0;
#X connect 14 2 13 0;
#X connect 14 2 30 0;
#X connect 16 0 14 0;
#X connect 18 0 14 0;
#X connect 20 0 18 0;
#X connect 31 0 0 0;
#X connect 33 0 3 0;
#X connect 34 0 35 0;
#X connect 43 0 44 0;
#X connect 45 0 42 0;
#X connect 48 0 45 0;
#X connect 48 1 43 0;
#X connect 48 2 22 0;
#X connect 48 3 23 0;
#X connect 48 4 24 0;
#X connect 48 5 25 0;
#X connect 48 6 26 0;
#X connect 48 7 27 0;
#X connect 48 8 37 0;
#X connect 48 9 38 0;
#X connect 48 10 39 0;
#X connect 48 11 40 0;
#X connect 48 12 41 0;
#X connect 49 0 34 0;
#X connect 49 1 1 0;
#X connect 49 2 21 0;
#X connect 50 0 6 0;
