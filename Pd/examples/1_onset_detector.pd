#N canvas 609 22 518 849 10;
#X declare -path ../bin -path ../utils;
#X obj 39 451 cnv 15 160 50 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 9 -163 cnv 15 250 20 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 47 457 output~;
#X obj 65 -29 route list;
#X obj 65 80 sel 1;
#X obj 84 226 random;
#X obj 117 185 length;
#X obj 65 168 t l b l;
#X text 8 -334 ...assuming externals are in parent folder...;
#X floatatom 74 15 5 0 0 0 - - -;
#X text 111 14 onset strength;
#X floatatom 125 205 5 0 0 0 - - -;
#X msg 15 -140 station \$1;
#X floatatom 15 -161 5 0 7 0 - - -;
#X obj 54 -97 print STATION;
#X obj 15 -119 radioin;
#X obj 146 378 *~;
#X obj 44 122 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 65 254 list split;
#X obj 93 276 sum;
#X text 129 225 at every onset \, pick a random onset in buffer (0
= oldest);
#X floatatom 101 298 7 0 0 0 - - -;
#X text 160 206 number of onsets in buffer;
#X obj 350 162 spigot 0;
#X obj 392 144 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 71 123 reset;
#X obj 65 145 list_iot 10000;
#X obj 93 325 trapenv 2;
#X obj 65 58 > 10;
#X text 99 57 <- report onset when onset_strength is greater than this.
;
#X text 148 101 <- output one onset every n miliseconds.;
#X text 158 144 stores elapsed time between detections;
#X text 158 320 trapezoidal envelope. It fades the edges to avoid clipping
when jumping between different positions in the buffer.;
#X text 148 289 add together all the time differences to compute time
delay to selected onset.;
#X text 13 -291 1_onset_detector;
#X text 11 -283 =================;
#X text 13 -270 This example shows how to use [essentiaRT~] to report
onset positions and to store these as a list of time delays for later
retrieval of the onset positions in a circular audio buffer (delwrite~/delread~).
We use [essentiaRT~] onset_strength feature to discard too weak onsets
\, and then use each new onset report as a trigger to jump to a previously
detected onset in the audio buffer.;
#X obj 33 -75 delwrite~ deline 10000;
#X obj 132 355 delread~ deline;
#X obj 350 182 print LIST-IOT;
#X obj 15 401 xfade~;
#X text 115 460 (1) DSP on;
#X floatatom 86 37 5 0 0 0 - - -;
#X floatatom 128 80 5 0 0 0 - - -;
#X floatatom 146 123 5 0 0 0 - - -;
#X text 183 123 <- change memory size (ms);
#X text 120 477 & volume up;
#X text 53 -162 (2) pick a radio station (0-7);
#X obj 11 -315 declare -path ../bin -path ../utils;
#X obj 65 -7 route i.strength;
#X obj 65 102 timegate 30;
#X obj 25 -50 essentiaRT~ 40;
#X connect 3 0 49 0;
#X connect 4 0 50 0;
#X connect 5 0 18 1;
#X connect 6 0 11 0;
#X connect 6 0 5 1;
#X connect 7 0 18 0;
#X connect 7 1 5 0;
#X connect 7 2 6 0;
#X connect 12 0 15 0;
#X connect 13 0 12 0;
#X connect 15 0 37 0;
#X connect 15 0 40 0;
#X connect 15 0 51 0;
#X connect 15 2 14 0;
#X connect 16 0 40 1;
#X connect 18 1 19 0;
#X connect 19 0 21 0;
#X connect 19 0 27 0;
#X connect 23 0 39 0;
#X connect 24 0 23 1;
#X connect 25 0 26 0;
#X connect 26 0 23 0;
#X connect 26 0 7 0;
#X connect 27 0 38 0;
#X connect 27 1 16 1;
#X connect 28 0 4 0;
#X connect 38 0 16 0;
#X connect 40 0 2 0;
#X connect 40 0 2 1;
#X connect 40 1 2 1;
#X connect 40 1 2 0;
#X connect 42 0 28 1;
#X connect 43 0 50 1;
#X connect 44 0 26 1;
#X connect 49 0 9 0;
#X connect 49 0 28 0;
#X connect 50 0 17 0;
#X connect 50 0 26 0;
#X connect 51 1 3 0;
